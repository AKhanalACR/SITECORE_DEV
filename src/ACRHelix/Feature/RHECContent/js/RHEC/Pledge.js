var countryObject = {
    "Afghanistan": {},
    "Albania": {},
    "Algeria": {},
    "American Samoa": {},
    "Andorra": {},
    "Angola": {},
    "Anguilla": {},
    "Antarctica": {},
    "Antigua and Barbuda": {},
    "Argentina": {},
    "Armenia ": {},
    "Aruba": {},
    "Australia": {},
    "Austria": {},
    "Azerbaijan": {},
    "Bahamas": {},
    "Bahrain": {},
    "Bangladesh ": {},
    "Barbados": {},
    "Belarus": {},
    "Belgium": {},
    "Belize": {},
    "Bermuda": {},
    "Bhutan": {},
    "Bolivia": {},
    "Bosnia and Herzegovina": {},
    "Botswana": {},
    "Brazil": {},
    "British Indian Ocean Territory": {},
    "Bulgaria": {},
    "Burkina Faso": {},
    "Burundi": {},
    "Cambodia": {},
    "Cameroon": {},
    "Canada": [
        "Alberta",
        "British Columbia",
        "Manitoba",
        "New Brunswick",
        "Newfoundland",
        "Northwest Territories",
        "Nova Scotia",
        "Ontario",
        "Prince Edward Island",
        "Quebec",
        "Saskatchewan",
        "Yukon"],
    "Cape Verde": {},
    "Cayman Islands": {},
    "Central African Republic": {},
    "Chad": {},
    "Chile": {},
    "China": {},
    "Christmas Island": {},
    "Cocos (Keeling) Islands": {},
    "Colombia": {},
    "Comoros": {},
    "Congo": {},
    "Congo Democratic Republic": {},
    "Cook Islands": {},
    "Costa Rica": {},
    "Cote D'Ivoire": {},
    "Croatia": {},
    "Cuba": {},
    "Cyprus": {},
    "Czech Republic": {},
    "Denmark": {},
    "Djibouti": {},
    "Dominica": {},
    "Dominican Republic": {},
    "East Timor": {},
    "Ecuador": {},
    "Egypt": {},
    "El Salvador": {},
    "Equatorial Guinea": {},
    "Eritrea": {},
    "Estonia": {},
    "Ethiopia": {},
    "Falkland Islands (Malvinas)": {},
    "Fiji": {},
    "Finland": {},
    "France": {},
    "French Guiana": {},
    "French Polynesia": {},
    "French Southern Territories": {},
    "Gambia": {},
    "Georgia": {},
    "Germany": {},
    "Ghana": {},
    "Gibraltar": {},
    "Greece": {},
    "Greenland": {},
    "Grenada": {},
    "Guadeloupe": {},
    "Guam": {},
    "Guatemala": {},
    "Guinea": {},
    "Guinea-Bissau": {},
    "Guyana": {},
    "Haiti": {},
    "Heard and McDonald Islands": {},
    "Holy See (Vatican City)": {},
    "Honduras": {},
    "Hong Kong": {},
    "Hungary": {},
    "Iceland": {},
    "India": {},
    "Indonesia": {},
    "Iran Islamic Republic of": {},
    "Iraq": {},
    "Ireland": {},
    "Israel": {},
    "Italy": {},
    "Jamaica": {},
    "Japan": {},
    "Jordan": {},
    "Kazakstan": {},
    "Kenya": {},
    "Kiribati": {},
    "Korea North ": {},
    "Korea South": {},
    "Kuwait": {},
    "Kyrgyzstan": {},
    "Lao": {},
    "Latvia": {},
    "Lebanon": {},
    "Lesotho": {},
    "Liberia": {},
    "Libyan Arab Jamahiriya": {},
    "Liechtenstein": {},
    "Lithuania": {},
    "Luxembourg": {},
    "Macau": {},
    "Macedonia": {},
    "Madagascar": {},
    "Malawi": {},
    "Malaysia": {},
    "Maldives": {},
    "Mali": {},
    "Malta": {},
    "Marshall Islands": {},
    "Martinique": {},
    "Mauritania": {},
    "Mauritius": {},
    "Mayotte": {},
    "Mexico": {},
    "Micronesia": {},
    "Moldova Republic of": {},
    "Monaco": {},
    "Mongolia": {},
    "Montserrat": {},
    "Morocco": {},
    "Mozambique": {},
    "Myanmar": {},
    "Namibia": {},
    "Nauru": {},
    "Nepal": {},
    "Netherlands": {},
    "Netherlands Antilles": {},
    "New Caledonia": {},
    "New Zealand": {},
    "Nicaragua": {},
    "Niger": {},
    "Nigeria": {},
    "Niue": {},
    "Norfolk Island": {},
    "Northern Mariana Islands": {},
    "Norway": {},
    "Oman": {},
    "Pakistan": {},
    "Palau": {},
    "Palestinian Territory": {},
    "Panama": {},
    "Papua New Guinea": {},
    "Paraguay": {},
    "Peru": {},
    "Philippines": {},
    "Pitcairn": {},
    "Poland": {},
    "Portugal": {},
    "Puerto Rico": {},
    "Qatar": {},
    "Reunion": {},
    "Romania": {},
    "Russian Federation": {},
    "Rwanda": {},
    "S. Georgia and S. Sandwich Is.": {},
    "Saint Kitts and Nevis": {},
    "Saint Lucia": {},
    "Saint Pierre and Miquelon": {},
    "Samoa": {},
    "San Marino": {},
    "Sao Tome and Principe": {},
    "Saudi Arabia": {},
    "Senegal": {},
    "Seychelles": {},
    "Sierra Leone": {},
    "Singapore": {},
    "Slovakia": {},
    "Slovenia": {},
    "Solomon Islands": {},
    "Somalia": {},
    "South Africa": {},
    "Spain": {},
    "Sri Lanka": {},
    "St. Vincent and Grenadines": {},
    "Sudan": {},
    "Suriname": {},
    "Svalbard and Jan Mayen": {},
    "Swaziland": {},
    "Sweden": {},
    "Switzerland": {},
    "Syrian Arab Republic": {},
    "Taiwan": {},
    "Tajikistan": {},
    "Tanzania United Republic of": {},
    "Togo": {},
    "Tokelau": {},
    "Tonga": {},
    "Trinidad and Tobago": {},
    "Tunisia": {},
    "Turkey": {},
    "Turkmenistan": {},
    "Turks and Caicos Islands": {},
    "Tuvalu": {},
    "U.S.Minor Outlying Islands": {},
    "Uganda": {},
    "Ukraine": {},
    "United Arab Emirates": {},
    "United Kingdom": {},
    "United States": ["Alabama",
        "Alaska",
        "American Samoa",
        "Arizona",
        "Arkansas",
        "California",
        "Colorado",
        "Connecticut",
        "Delaware",
        "District of Columbia",
        "Fed. States of Micronesia",
        "Florida",
        "Georgia",
        "Guam",
        "Hawaii",
        "Idaho",
        "Illinois",
        "Indiana",
        "Iowa",
        "Kansas",
        "Kentucky",
        "Louisiana",
        "Maine",
        "Marshall Islands",
        "Maryland",
        "Massachusetts",
        "Michigan",
        "Minnesota",
        "Mississippi",
        "Missouri",
        "Montana",
        "Nebraska",
        "Nevada",
        "New Hampshire",
        "New Jersey",
        "New Mexico",
        "New York",
        "North Carolina",
        "North Dakota",
        "Northern Mariana Is.",
        "Ohio",
        "Oklahoma",
        "Oregon",
        "Pennsylvania",
        "Puerto Rico",
        "Rhode Island",
        "South Carolina",
        "South Dakota",
        "Tennessee",
        "Texas",
        "Utah",
        "Vermont",
        "Virgin Islands",
        "Virginia",
        "Washington",
        "West Virginia",
        "Wisconsin",
        "Wyoming"],
    "Uzbekistan": {},
    "Vanuatu": {},
    "Venezuela": {},
    "Vietnam": {},
    "Virgin Islands British": {},
    "Virgin Islands U.S.": {},
    "Wallis and Futuna": {},
    "Western Sahara": {},
    "Yemen": {},
    "Yugoslavia": {},
    "Zambia": {},
    "Zimbabwe":{}
}
var CaptchaCallback = function () {
    grecaptcha.render('proFormCaptcha', { 'sitekey': '6LcLrVAUAAAAALKEcQ9BLAcJehU42cLMaAEBj_i2', 'data-callback': 'prorecaptcha_callback' });
    grecaptcha.render('facFormCaptcha', { 'sitekey': '6LcLrVAUAAAAALKEcQ9BLAcJehU42cLMaAEBj_i2', 'data-callback': 'facrecaptcha_callback' });
};
function prorecaptcha_callback() {
    $('#proCaptchaerror').hide();
}
function facrecaptcha_callback() {
    $('#facCaptchaerror').hide();
}
$(document).ready(function () {
    $(".professional-btn").click(function () {
        $(".facility-form").hide();
        $(".professional-form").show();
        $(".professional-btn").addClass("active");
        $(".facility-btn").removeClass("active");
        $("#facTextTitle").hide();
        $("#facTextcontent").hide();
        $("#proTextTitle").show();
        $("#proTextcontent").show();
    });
    $(".facility-btn").click(function () {
        $(".professional-form").hide();
        $(".facility-form").show();
        $(".facility-btn").addClass("active");
        $(".professional-btn").removeClass("active");
        $("#facTextTitle").show();
        $("#facTextcontent").show();
        $("#proTextTitle").hide();
        $("#proTextcontent").hide();
    });

    $(".procominput").keyup(function () {
        if ($("#pledgeforms").hasClass("prosubmitattempt")) {
            if (!$('#profname').val()) {
                $('#proFnameError').show();
            } else {
                $('#proFnameError').hide();
            }
            if (!$('#prolname').val()) {
                $('#proLnameError').show();
            } else {
                $('#proLnameError').hide();
            }
            if (!$('#proemail').val()) {
                $('#proEmailError').show();
                $('#proEmailpatternerror').hide();
                $('#proEmailexistserror').hide();
            } else {
                var email = $('#proemail').val();
                var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
                if (!emailReg.test(email)) {
                    $('#proEmailpatternerror').show();
                    $('#proEmailError').hide();
                    $('#proEmailexistserror').hide();
                } else {
                    $('#proEmailpatternerror').hide();
                    $('#proEmailError').hide();
                    if ($('#existemail').val() && $('#proemail').val() == $('#existemail').val()) {
                        $('#proEmailexistserror').show();
                    } else {
                        $('#proEmailexistserror').hide();
                    }
                }
            }
            if (!$('#proconfirm-email').val()) {
                $('#proEmailConfirmError').show();
                $('#proEmailConfirmMatchError').hide();
            } else {
                $('#proEmailConfirmError').hide();
                if ($('#proconfirm-email').val() != $('#proemail').val()) {
                    $('#proEmailConfirmMatchError').show();
                    $('#proEmailConfirmError').hide();
                } else {
                    $('#proEmailConfirmError').hide();
                    $('#proEmailConfirmMatchError').hide();
                }

            }
            if (!$('#procountry').val()) {
                $('#proCountryerror').show();
            } else {
                $('#proCountryerror').hide();
            }
        }
    });
    $(".faccominput").keyup(function () {
        if ($("#pledgeforms").hasClass("facsubmitattempt")) {

            if (!$('#facility-name').val()) {
                $('#facFacilityError').show();
            } else {
                $('#facFacilityError').hide();
            }
            if (!$('#city').val()) {
                $('#facCityerror').show();
            } else {
                $('#facCityerror').hide();
            }
            if (!$('#state').val()) {
                $('#facStateerror').show();
            } else {
                $('#facStateerror').hide();
            }
            if (!$('#zipcode').val()) {
                $('#facZiperror').show();
            } else {
                $('#facZiperror').hide();
            }


            if (!$('#facfname').val()) {
                $('#facFnameError').show();
            } else {
                $('#facFnameError').hide();
            }
            if (!$('#faclname').val()) {
                $('#facLnameError').show();
            } else {
                $('#facLnameError').hide();
            }
            if (!$('#facemail').val()) {
                $('#facEmailError').show();
                $('#facEmailpatternerror').hide();
            } else {
                var email = $('#facemail').val();
                var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
                if (!emailReg.test(email)) {
                    $('#facEmailpatternerror').show();
                    $('#facEmailError').hide();
                } else {
                    $('#facEmailpatternerror').hide();
                    $('#facEmailError').hide();
                }
            }
            if (!$('#facconfirm-email').val()) {
                $('#facEmailConfirmError').show();
                $('#facEmailConfirmMatchError').hide();
            } else {
                $('#facEmailConfirmError').hide();
                if ($('#facconfirm-email').val() != $('#facemail').val()) {
                    $('#facEmailConfirmMatchError').show();
                    $('#facEmailConfirmError').hide();
                } else {
                    $('#facEmailConfirmError').hide();
                    $('#facEmailConfirmMatchError').hide();
                }

            }
            if (!$('#faccountry').val()) {
                $('#facCountryerror').show();
            } else {
                $('#facCountryerror').hide();
            }
        }
    });

    $("#proPledgeSubmit").click(function proPledgeValidation(e) {
        $('#proFnameError').hide();
        $('#proLnameError').hide();
        $('#proEmailError').hide();
        $('#proEmailpatternerror').hide();
        $('#proEmailexistserror').hide();
        $('#proEmailConfirmError').hide();
        $('#proEmailConfirmMatchError').hide();
        $('#proCountryerror').hide();
        $('#proCaptchaerror').hide();
        if (!$("#pledgeforms").hasClass("prosubmitattempt")) {
            $('#pledgeforms').addClass("prosubmitattempt");
        }     
        var errorCount = 0;
        if (!$('#profname').val()) {
            $('#proFnameError').show();
            errorCount = 1;
        }
        if (!$('#prolname').val()) {
            $('#proLnameError').show();
            errorCount = 1;
        }
        if (!$('#proemail').val()) {
            $('#proEmailError').show();
            errorCount = 1;
        } else {
            var email = $('#proemail').val();
            var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
            if (!emailReg.test(email)) {
                $('#proEmailpatternerror').show();
                errorCount = 1;
            } else {
                if ($('#existemail').val() && $('#proemail').val() == $('#existemail').val()) {
                    $('#proEmailexistserror').show();
                    errorCount = 1;
                }
            }
        }
        if (!$('#proconfirm-email').val()) {
            $('#proEmailConfirmError').show();
            errorCount = 1;
        } else {
            if ($('#proconfirm-email').val() != $('#proemail').val()) {
                $('#proEmailConfirmMatchError').show();
                errorCount = 1;
            }

        }
        if (!$('#procountry').val()) {
            $('#proCountryerror').show();
            errorCount = 1;
        }
        if (grecaptcha.getResponse(0).length === 0) {
            $('#proCaptchaerror').show();
            errorCount = 1;
        }
        if (errorCount == 1) {
            e.preventDefault();
        }
        else {
            e.preventDefault();
            console.log("success");
            submitproPledgeData();
        }


    }

    );
    $("#facPledgeSubmit").click(function facPledgeValidation(e) {

        $('#facFacilityError').hide();
        $('#facCityerror').hide();
        $('#facCountryerror').hide();
        $('#facStateerror').hide();
        $('#facZiperror').hide();
        $('#facFnameError').hide();
        $('#facLnameError').hide();
        $('#facEmailError').hide();
        $('#facEmailpatternerror').hide();
        //$('#proEmailexistserror').hide();
        $('#facEmailConfirmError').hide();
        $('#facEmailConfirmMatchError').hide();        
        $('#facCaptchaerror').hide();
        if (!$("#pledgeforms").hasClass("facsubmitattempt")) {
            $('#pledgeforms').addClass("facsubmitattempt");
        }
        var errorCount = 0;
        if (!$('#facility-name').val()) {
            $('#facFacilityError').show();
            errorCount = 1;
        }
        if (!$('#city').val()) {
            $('#facCityerror').show();
            errorCount = 1;
        }
        if (!$('#faccountry').val()) {
            $('#facCountryerror').show();
            errorCount = 1;
        }
        if (!$('#state').val()) {
            $('#facStateerror').show();
            errorCount = 1;
        }
        if (!$('#zipcode').val()) {
            $('#facZiperror').show();
            errorCount = 1;
        }
        if (!$('#facfname').val()) {
            $('#facFnameError').show();
            errorCount = 1;
        }
        if (!$('#faclname').val()) {
            $('#facLnameError').show();
            errorCount = 1;
        }
        if (!$('#facemail').val()) {
            $('#facEmailError').show();
            errorCount = 1;
        } else {
            var email = $('#facemail').val();
            var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
            if (!emailReg.test(email)) {
                $('#facEmailpatternerror').show();
                errorCount = 1;
            } 
        }
        if (!$('#facconfirm-email').val()) {
            $('#facEmailConfirmError').show();
            errorCount = 1;
        } else {
            if ($('#facconfirm-email').val() != $('#facemail').val()) {
                $('#facEmailConfirmMatchError').show();
                errorCount = 1;
            }

        }
      
        if (grecaptcha.getResponse(1).length === 0) {
            $('#facCaptchaerror').show();
            errorCount = 1;
        }
        if (errorCount == 1) {
            e.preventDefault();
        }
        else {
            e.preventDefault();
            console.log("successFacility");
            submitfacPledgeData();
        }


    }

    );


    function submitproPledgeData() {
        var firstName = $('#profname').val();
        var lastName = $('#prolname').val();
        var email = $('#proemail').val();
        var country = $('#procountry').val();
        var capchaResponse = grecaptcha.getResponse(0);
        //var ItemId = $('.commentParentId').attr('id');
        // var pageUrl = window.location.pathname.replace(/\/+$/, '');
        $.ajax({
            url: "/api/Sitecore/RHECContent/ProPledgeSubmit",
            //url: pageUrl +'/CommentSubmit/',
            type: 'post',
            async: false,
            data: { firstName: firstName, lastName: lastName, email: email, country: country, capchaResponse: capchaResponse },
            dataType: 'json',
            beforeSend: function () {
                $('#proloader').show(); 
                $('#formbuttonscontainer').hide();               
                $('#proPledgeSubmit').hide();                
            },
            complete: function () {
                $('#proloader').hide();
                $('#formbuttonscontainer').show();               
                $('#proPledgeSubmit').show();                
            },
            success: function (data) {
                if (data.success == "success") {
                    $("#professionalForm")[0].reset();
                    grecaptcha.reset(0);
                    $("#facilityForm")[0].reset();
                    grecaptcha.reset(1);
                    //alert("success");
                    $('#pledgeforms').removeClass("prosubmitattempt");
                    $('#pledgeforms').removeClass("facsubmitattempt");
                    window.location.href = data.redirecturl;
                   
                    //$('#commentWrap').removeClass("submitattempt");
                    //$(".alert").show();
                    //setTimeout(function () { $(".alert").hide(); }, 10000);
                }
                else if (data.message == "EmailExists") {
                    $('#proEmailexistserror').innerHTML = data.errormsg;
                    $('#existemail').val(data.existemail);
                    $('#proEmailexistserror').show();
                } else if (data.message == "DataNotSaved") {
                    $("#professionalForm")[0].reset();
                    grecaptcha.reset(0);
                    window.location.href = data.redirecturl;
                } else if (data.message == "invalidCaptcha") {
                    grecaptcha.reset(0);
                    $('#proCaptchaerror').show();
                }

                else {
                    grecaptcha.reset(0);
                    $('#proCaptchaerror').show();
                }
            },
            error: function (jqXHR, exception) {
                alert("Something went wrong. Please try again after some time");
            },
        });
    }
    
    function submitfacPledgeData() {
        var faciityName = $('#facility-name').val();
        var city = $('#city').val();
        var state = $('#state').val();
        var zipcode = $('#zipcode').val();        
        var firstName = $('#facfname').val();
        var lastName = $('#faclname').val();
        var email = $('#facemail').val();
        var country = $('#faccountry').val();
        var capchaResponse = grecaptcha.getResponse(1);
        //var ItemId = $('.commentParentId').attr('id');
        // var pageUrl = window.location.pathname.replace(/\/+$/, '');
        $.ajax({
            url: "/api/Sitecore/RHECContent/FacPledgeSubmit",
            //url: pageUrl +'/CommentSubmit/',
            type: 'post',
            async: false,
            data: { faciityName: faciityName, city: city, state: state, zipcode: zipcode, firstName: firstName, lastName: lastName, email: email, country: country, capchaResponse: capchaResponse },
            dataType: 'json',
            beforeSend: function () {
                $('#facloader').show();
                $('#formbuttonscontainer').hide();               
                $('#facPledgeSubmit').hide();
                
            },
            complete: function () {
                $('#facloader').hide();
                $('#formbuttonscontainer').show();                
                $('#facPledgeSubmit').show();
                
            },
            success: function (data) {
                if (data.success == "success") {
                    $("#facilityForm")[0].reset();
                    $("#professionalForm")[0].reset();
                    grecaptcha.reset(1);
                    grecaptcha.reset(0);
                    //alert("success");
                    $('#pledgeforms').removeClass("prosubmitattempt");
                    $('#pledgeforms').removeClass("facsubmitattempt");
                    window.location.href = data.redirecturl;
                    //$('#commentWrap').removeClass("submitattempt");
                    //$(".alert").show();
                    //setTimeout(function () { $(".alert").hide(); }, 10000);
                }
                else if (data.message == "DataNotSaved") {
                    $("#facilityForm")[0].reset();
                    grecaptcha.reset(1);
                    window.location.href = data.redirecturl;
                } else if (data.message == "invalidCaptcha") {
                    grecaptcha.reset(1);
                    $('#facCaptchaerror').show();
                } else if (data.message == "StateZipRequired") {
                    $('#facStateerror').show();
                    $('#facZiperror').show();
                }

                else {
                    grecaptcha.reset(0);
                    $('#facCaptchaerror').show();
                }
            },
            error: function (jqXHR, exception) {
                alert("Something went wrong. Please try again after some time");
            },
        });
    }


    var proCountrySel = document.getElementById("procountry");
    var facCountrySel = document.getElementById("faccountry");
    var stateSel = document.getElementById("state");
    //var chapterSel = document.getElementById("chapter");
    for (var x in countryObject) {
        if (x == "United States")
        {
            proCountrySel.options[proCountrySel.options.length] = new Option(x, x, false, true);
            facCountrySel.options[facCountrySel.options.length] = new Option(x, x, false, true);
        }
        else
        {
            proCountrySel.options[proCountrySel.options.length] = new Option(x, x);
            facCountrySel.options[facCountrySel.options.length] = new Option(x, x);
        }        
    }
    for (var y = 0; y < countryObject["United States"].length; y++) {      
        if (y == 0) {
            stateSel.options[stateSel.options.length] = new Option(countryObject["United States"][y], countryObject["United States"][y], false, true);
        }
        else {
            stateSel.options[stateSel.options.length] = new Option(countryObject["United States"][y], countryObject["United States"][y]);
        }
    }
    facCountrySel.onchange = function () {
        //empty Chapters- and Topics- dropdowns
        stateSel.length = 0;
        //display correct values
        if (countryObject[this.value] && countryObject[this.value].length > 0) {
           var states = countryObject[this.value]
            for (var y = 0; y < states.length; y++) {
               // stateSel.options[stateSel.options.length] = new Option(y, y);
                if (y==0) {
                    stateSel.options[stateSel.options.length] = new Option(states[y], states[y], false, true);
                }
                else {
                    stateSel.options[stateSel.options.length] = new Option(states[y], states[y]);
                }
                //stateSel.show();
                //document.getElementById("zipcode").show();
                $('#zipcode').val("");
                $('#zipCodeWrapper').show();
                $('#stateWrapper').show();
            }
        }
        else {
            stateSel.options[stateSel.options.length] = new Option("NotRequired", "NotRequired", false, true)
            //stateSel.hide();
            //document.getElementById("zipcode").hide();
            $('#zipCodeWrapper').hide();
            $('#zipcode').val("NotRequired");
            $('#stateWrapper').hide();
        }
        
       
    }   
});